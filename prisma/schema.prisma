// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

generator client {
  provider = "prisma-client-js"
  output   = "../src/generated/prisma"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum UnitType {
  YARN_SPINNING
  YARN_PROCESSING
  WEAVING_UNIT
  KNITTING_UNIT
  DYEING_UNIT
  FABRIC_PROCESSING_UNIT
  FABRIC_FINISHING_UNIT
  WASHING_UNIT
  CUTTING_UNIT
  COMPUTERIZED_EMBROIDERY_UNIT
  MANUAL_EMBROIDERY_UNIT
  FUSING_UNIT
  PRINTING_UNIT
  STITCHING_UNIT
  CHECKING_UNIT
  IRONING_PACKING_UNIT
  KAJA_BUTTON_UNIT
  MULTI_NEEDLE_DOUBLE_CHAIN_UNIT
  OIL_REMOVING_MENDING_CENTER
  PATTERN_MAKING_CENTER
  FILM_SCREEN_MAKING_CENTER
}


enum WorkType {
  DOMESTIC_WORK
  EXPORT_WORK
}


model Company {
    id  String   @id @default(uuid())
    name    String
    contactNumber String
    companyLogo         String?
    unitImages      String[]
    gstNumber       String?
    location        Json?
    unitType UnitType
    certifications  String[]
    workType        WorkType
    unitSqFeet      Int
    aboutCompany    String?
    machinery       Machinery[]
    services        Service[]
    createdAt       DateTime    @default(now())
    updatedAt       DateTime    @updatedAt
    @@map("companies")
    }

model Machinery{
    id          String    @id @default(cuid())
    companyId   String
    unitType    UnitType
    machineData Json
    quantity    Int
    company     Company   @relation(fields: [companyId], references: [id], onDelete: Cascade)
    createdAt   DateTime  @default(now())
    updatedAt   DateTime  @updatedAt

    @@map("machineries")
}




model Service {
    id          String    @id @default(cuid())
    companyId   String
    title String?
    description String?
    company     Company   @relation(fields: [companyId], references: [id], onDelete: Cascade)
    createdAt   DateTime  @default(now())
    updatedAt   DateTime  @updatedAt

    @@map("services")
}

model FormConfiguration {
  id            String    @id @default(cuid())
  unitType      UnitType
  displayName   String
  description   String?
  fieldConfig   Json      // The form structure for each unit type

  createdAt     DateTime  @default(now())
  updatedAt     DateTime  @updatedAt


  @@map("form_configurations")
}